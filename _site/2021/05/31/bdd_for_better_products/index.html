<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Behaviour-Driven Development for better software products &middot; Olivier von Dach
    
  </title>

  
  <link rel="canonical" href="http://localhost:4000/2021/05/31/bdd_for_better_products/">
  

  <link rel="stylesheet" href="http://localhost:4000/public/css/poole.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/syntax.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/lanyon.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/font-awesome.min.css">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;200&display=swap" rel="stylesheet">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="http://localhost:4000/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://localhost:4000/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <img src="/public/images/IMG_20201228_140658_w250_bw.jpg">
  </div>

  <div class="sidebar-item">
      <p class="citation"><i>Software Craftsmanship is a durable investment that makes possible the reconciliation of software quality, developer experience, low maintenance costs, and reactivity to the market.</i></p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="http://localhost:4000/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="http://localhost:4000/links/">Links</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="http://localhost:4000/literature/">Literature</a>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="http://localhost:4000/resume/">Resume</a>
        
      
    
  </nav>

  <div class="sidebar-item">
    <a href="https://ch.linkedin.com/in/vondacho" target="_blank"><i class="fa fa-linkedin"></i></a>
    <a href="https://github.com/vondacho" target="_blank"><i class="fa fa-github"></i></a>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Olivier von Dach</a>
            <small>Software Craftsman</small>
            <a href="https://ch.linkedin.com/in/vondacho" target="_blank"><i class="fa fa-linkedin"></i></a>
            <a href="https://github.com/vondacho" target="_blank"><i class="fa fa-github"></i></a>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Behaviour-Driven Development for better software products</h1>
  <span class="post-date">31 May 2021</span>
  <p><img src="../public/images/bdd_for_better_products/everybody_aligned.png" alt="" /></p>

<p>We need to minimize friction due to misunderstandings between software development and software specification teams, proposing an innovative approach for software specification. This one should facilitate the common understanding and encourage each stakeholder’s accountability, product person, software engineer, test engineer, in the quality of the delivered increments.</p>

<h2 id="structure">Structure</h2>

<ol>
  <li>The <strong>first</strong> part sets the current context with the traditional approach based on the usual agile tools and roles, illustrating some issues and suggesting remedies.</li>
  <li>The <strong>second</strong> part outlines Behaviour-Driven Development (BDD) as a recognised software crafting technique that can address the issues listed.</li>
  <li>The <strong>third</strong> part explains the concrete implementation of this technique.</li>
  <li>The <strong>fourth</strong> part provides immediately usable material for trying it out.</li>
</ol>

<h2 id="your-feedback">Your feedback</h2>

<p>Enjoy your reading and please spend a little more time once you have finished to give me <a href="https://forms.gle/iYuWQGJEWSqVBTR8A">your feedback on this article</a>.</p>

<p>A discussion about this article can also take place <a href="https://github.com/edgelaboratories/blog/discussions/3">here</a>.</p>

<h2 id="context">Context</h2>

<h3 id="traditional-approach">Traditional approach</h3>

<h4 id="backlog-building">Backlog building</h4>

<p>The product owner listens to customer needs, he owns and manages a product backlog composed of features that extend the current product capabilities or current system behaviour.</p>

<p><img src="../public/images/bdd_for_better_products/product_owner_customer.png" alt="" /></p>

<h4 id="features-understanding">Features understanding</h4>

<p>The product owner explains the expected system behaviour to software and test engineers; they try to align their mental representation with the product owner’s one challenging him with their perspective during backlog grooming or feature kick-off sessions.</p>

<p><img src="../public/images/bdd_for_better_products/product_owner_devteam.png" alt="" /></p>

<h4 id="software-delivery">Software delivery</h4>

<p>Every delivered functional increment is verified by the test engineer; he checks the completeness and the correctness, and with the best effort, the absence of regression. Anomalies are returned to the development team for the next delivery.</p>

<p><img src="../public/images/bdd_for_better_products/software_delivery.png" alt="" /></p>

<h3 id="some-weaknesses-and-remedies">Some weaknesses and remedies</h3>

<h4 id="anomalies">Anomalies</h4>

<p>Anomalies due to misalignments or lack of quality in the realisation can cause time-consuming ping-pong loops.</p>

<p><em>Could an innovative approach that re-establishes a contractual element encourage greater accountability of each stakeholder for the quality of delivery?</em></p>

<p><img src="../public/images/bdd_for_better_products/unefficient_software_development.png" alt="" /></p>

<h4 id="cost-of-regression-tests">Cost of regression tests</h4>

<p>The testing activity usually focuses on checking newly added features and regressions. Regression testing activity is time-consuming and should be automatized, or unfortunately, may be shortened to well-selected tests.</p>

<p><em>Could we innovate on the tester’s activity by automating it and giving him more impact upstream?</em></p>

<p><img src="../public/images/bdd_for_better_products/minimal_testing_coverage.png" alt="" /></p>

<h4 id="loss-of-trust">Loss of trust</h4>

<p>Anomalies, regressions, misalignments can have a bad impact on the already established trust towards the product itself, outside or even inside the product team.</p>

<p><em>Could a collaborative approach that promotes shared accountability, transparency and regular feedback during implementation build trust?</em></p>

<p><img src="../public/images/bdd_for_better_products/trust.png" alt="" /></p>

<h4 id="tunnel-effect">Tunnel effect</h4>

<p>The absence of testable delivery for a couple of time means less feedback, hence less opportunity to react to any misalignment.</p>

<p><em>Could the division of a feature into several deliverables containing one or more scenarios facilitate deliveries and thus feedback possibilities?</em></p>

<p><img src="../public/images/bdd_for_better_products/tunnel_effect.png" alt="" /></p>

<h4 id="lack-of-documentation">Lack of documentation</h4>

<p>What does the system solve? What are the features? What are the nominal and edge scenarios? What about testing evidence?</p>

<p><a href="https://agilemanifesto.org/">Agile software development manifesto</a> aims to privilege working software over comprehensive documentation. Therefore, the sources of documentation about <strong>what</strong> the developed system solves are production code, test code and mental and often distributed knowledge. Consequently, more pressure is put on well-crafted code. In addition, narrative sources of documentation can still be valuable for setting the context, but they are usually written at a high level and may no longer be aligned with the behaviour of the completed system.</p>

<p><em>Could a collaborative approach restore a lightweight, human-readable digital artefact that contractually formalises common understanding and be a source of living documentation that provides features and testing evidence?</em></p>

<p><img src="../public/images/bdd_for_better_products/living_documentation.png" alt="" /></p>

<h2 id="bdd">BDD</h2>

<p><strong>Behaviour-Driven Development</strong> (BDD) is a software development technique with the main promise to facilitate shared understanding and optimise software deliveries’ functional quality.</p>

<p><img src="../public/images/bdd_for_better_products/tres_amigos.png" alt="" /></p>

<h3 id="secure-software-development">Secure software development</h3>

<p>This technique helps to develop securely <strong>the right thing</strong>, which is the expected system behaviour, and without causing functional regression.</p>

<h3 id="contract-driven">Contract-driven</h3>

<p>This technique proposes a context for <strong>collaborative specification</strong> which aims to establish shared understanding of the expected system behaviour, and formalising this latter as a readable <strong>contractual and executable specification</strong> on which acceptance tests can be defined.</p>

<h3 id="domain-driven">Domain-driven</h3>

<p>The issued specification artefact uses a natural language based on the <strong>domain language</strong> which is naturally understandable by every stakeholder: product person, software and test engineers.</p>

<h3 id="documentation-driven">Documentation-driven</h3>

<p>This artefact written with <a href="https://specflow.org/gherkin-editor">Gherkin</a> syntax explains the system behaviour <strong>based on examples</strong> grouped in scenarios that describe the system use cases and the business rules.</p>

<p>Here is an example that uses a generic scenario to describe the behaviour of a calculation function; the <em>Examples</em> section defines the input and output values:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rule: The stress amplitude is the ratio between shock values of two stress driver shocks.

    Scenario Outline: Return expected stress amplitude for compatible shock types

      Given a stress shock
        | driver-key   | shock-type   | shock-value   |
        | &lt;driver-key&gt; | &lt;shock-type&gt; | &lt;shock-value&gt; |
      And another stress shock
        | driver-key   | shock-type       | shock-value       |
        | &lt;driver-key&gt; | &lt;ref-shock-type&gt; | &lt;ref-shock-value&gt; |
      When calculating amplitude
      Then the returned amplitude is &lt;amplitude&gt;
      
      Examples:
        | driver-key | shock-type | shock-value | ref-shock-type | ref-shock-value | amplitude |
        | Equity-USA | RELATIVE   | 0.15        | RELATIVE       | 0.10            | 1.5       |
        | Equity-USA | RELATIVE   | 0.25        | RELATIVE       | 0.10            | 2.5       |
        | Equity-USA | RELATIVE   | -0.15       | RELATIVE       | 0.10            | -1.5      |
        | Equity-USA | ABSOLUTE   | 3           | ABSOLUTE       | 2               | 1.5       |
        | Equity-USA | ABSOLUTE   | 2           | ABSOLUTE       | 3               | 0.6667    |
        | Equity-USA | ABSOLUTE   | 2           | RELATIVE       | 0.10            | -         |
        | Equity-USA | RELATIVE   | 0.15        | ABSOLUTE       | 2               | -         |
        | Equity-USA | RELATIVE   | 0.15        | RELATIVE       | 0               | -         |
        | Equity-USA | ABSOLUTE   | 2           | ABSOLUTE       | 0               | -         |
</code></pre></div></div>
<blockquote>
  <p>More BDD scenarios:
<a href="https://github.com/vondacho/arch-blueprint-kotlin/tree/master/src/test/resources/features">Blueprint API (Kotlin)</a>,</p>
</blockquote>

<h3 id="test-driven">Test-driven</h3>

<p>Coupled with <strong>Acceptance Test-Driven Development</strong> (ATDD), an outside-in software development technique, the software engineer automates the test cases and can be driven to the completeness, correctness, and the absence of functional regression when developing a feature increment.</p>

<p>BDD was originally named in 2003 by <a href="https://dannorth.net/introducing-bdd">Dan North</a> as a response to test-driven development (TDD), including acceptance test or customer test-driven development practices as found in extreme programming.</p>

<h2 id="bdd-in-practice">BDD in practice</h2>

<p><img src="../public/images/bdd_for_better_products/bdd_in_practice.png" alt="" /></p>

<p><strong>Specification by example</strong> activity facilitates a common understanding of expected behaviour based on examples. It applies to a large set of use cases of any domain: calculation, aggregation, orchestration, eventing, management, workflow.</p>

<ul>
  <li>Specification by example activity is done during <strong>Example Mapping</strong> sessions.</li>
  <li>Formalisation of expected system behaviour is done with <strong>acceptance scenarios</strong> expressed with <strong>domain language</strong> and formalized with <a href="https://specflow.org/gherkin-editor">Gherkin</a> syntax.</li>
  <li>It requires practice; finding <strong>good wording</strong> have to be learned by doing; efficient wording can be easily understood, can be validated, and can be automatized.</li>
  <li>Automatization means the development of <strong>automatized acceptance tests</strong> enabled by using <strong>glue code</strong>.</li>
  <li>Development of production code is then <strong>driven by existing acceptance tests</strong> (ATDD).</li>
</ul>

<h3 id="three-amigos">Three amigos</h3>

<p>The conversations in the Specification by Example activity are the result of the interaction of three actors with different perspectives, brought together for the same purpose: <strong>Product person</strong> or domain expert, <strong>software engineer, and test engineer</strong>.</p>

<p><img src="../public/images/bdd_for_better_products/three_amigos.png" alt="" /></p>

<p>The Product person should be the product owner; the Domain expert (business analyst, domain architect, or business owner) can be a substitute of the Product person; the Customer can be an optional stakeholder.</p>

<h3 id="example-mapping">Example mapping</h3>

<p>An <a href="https://cucumber.io/blog/bdd/example-mapping-introduction/">Example mapping</a> session facilitates <strong>structured conversations</strong> between the three amigos.</p>

<p>It allows identifying user stories, open questions, business rules, and examples.</p>

<p><img src="../public/images/bdd_for_better_products/example_mapping_xebia.png" alt="" /></p>

<blockquote>
  <p><a href="https://www.xebia.com/blog/example-mapping-steering-the-conversation/">xebia.com/blog/example-mapping-steering-the-conversation</a></p>
</blockquote>

<h3 id="feature-story-business-rule-scenario-example">Feature, story, business rule, scenario, example</h3>

<ul>
  <li>One <strong>feature</strong> is explained by one or more scenarios grouped in stories.</li>
  <li>One <strong>story</strong> usually groups one or more scenarios and represents a feature increment with business value.</li>
  <li>One <strong>business rule</strong> is usually supported by one or more scenarios or examples.</li>
  <li>One <strong>scenario</strong> is supported by one or more <strong>examples</strong>.</li>
  <li>One scenario by nominal case.</li>
  <li>One scenario by edge case.</li>
  <li>One scenario by negative or error case.</li>
</ul>

<h3 id="scenarios-writing">Scenarios writing</h3>

<p>Writing scenarios helps to build up the common ubiquitous language in a way that <strong>everyone can understand and validate</strong>.</p>

<p>As it requires some experience and a particular way of thinking, it is recommended to let this activity to the test engineer or the software engineer. Feedback by the Product person can be done once they have drafted the <a href="https://specflow.org/gherkin-editor">Gherkin</a> specification.</p>

<p>A scenario is composed of a set of <strong>preconditions</strong> about the initial state or context, then a set of <strong>actions</strong> (usually one), then a set of <strong>assertions</strong> (or postconditions) about the final state or context.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Feature: To be able to manage a set of existing clients in a persistent way

  Background:
    Given a following set of existing clients
      | model-id | id                                   | name    | internal | prospect | owners | tags   | creation-date       |
      | 1        | ce751f30-217a-422c-b81b-8f75df4917b6 | client1 | true     | false    | x      | key1:a | 2020-10-10T12:00:00 |
      | 2        | 29e364b9-f5ef-43d9-9f30-e07a30b73e01 | client2 | true     | true     | -      | -      | 2020-10-09T12:00:00 |

  Rule: An existing client is a persisted resource in the system.

    Scenario: Add a new client to the existing clients

      Given a following set of client attributes
        | name | prospect | owners | tags            |
        | test | true     | owner1 | key:test,key1:a |
      And the next identifier is afd9ce9f-ee0e-4547-8c77-3cc43ec85dbc
      And the next timestamp is 2020-10-11T12:00:00
      When registering the new client
      Then the response status is CREATED
      And the attributes of the returned client are the following
        | id                                   | name | prospect | owners | tags            | creation-date       |
        | afd9ce9f-ee0e-4547-8c77-3cc43ec85dbc | test | true     | owner1 | key:test,key1:a | 2020-10-11T12:00:00 |
      And the returned client is added to the set of existing clients
      And no export of the configuration has been triggered
      And a Slack notification has been sent
</code></pre></div></div>
<blockquote>
  <p>More BDD scenarios:
<a href="https://github.com/vondacho/arch-blueprint-kotlin/tree/master/src/test/resources/features">Blueprint API (Kotlin)</a>,</p>
</blockquote>

<h3 id="scenarios-validation">Scenarios validation</h3>

<p>Every scenario has to be validated by every stakeholder or amigo, that it describes an expected facet of the system behaviour. As a result, shared understanding is materialized into a digital set of acceptance scenarios that establish a <strong>contract between all stakeholders</strong>.</p>

<p>These <strong>acceptance scenarios</strong> are the foundation of an executable specification and the building blocks for the definition of acceptance tests.</p>

<h3 id="acceptance-testing">Acceptance testing</h3>

<p>Acceptance tests support <strong>high-level functional testing</strong> which includes testing of new feature increment and regression testing.</p>

<p>This activity is usually done by a test engineer of a quality insurance team to validate a delivered feature increment before its deployment to production.</p>

<p>Non-functional requirements could be tested by specific acceptance tests.</p>

<h3 id="atdd">ATDD</h3>

<p>ATDD is a <strong>test-driven development technique</strong> based on <strong>acceptance tests</strong> used by the software engineer for driving its development to the expected system behaviour.</p>

<blockquote>
  <p>Given an acceptance scenario, a failing acceptance test is written first, then the software engineer writes the minimal production code to make it pass. This action is repeated with a next acceptance scenario, coupled with a refactoring phase applied to both test and production code, to take care of well-crafted code and design.</p>
</blockquote>

<blockquote>
  <p>This cycle executed at the feature level contains an inner TDD cycle performed at the component level, this technique is named Outside-in TDD.</p>
</blockquote>

<h3 id="bdd-and-atdd">BDD and ATDD</h3>

<p>ATDD is used with BDD to <strong>automate acceptance scenarios</strong>: one scenario gives one acceptance test.</p>

<h3 id="bdd-glue-code-test-code-and-production-code">BDD glue code, test code, and production code</h3>

<ul>
  <li><strong>Test code</strong> implements acceptance tests and interacts with the <strong>production code</strong>.</li>
  <li>BDD <strong>glue code</strong> implements the mapping of BDD steps writen in natural language into test code.</li>
  <li>BDD steps are mapped by BDD glue code into test code writen in a given technology.</li>
  <li>BDD framework (<a href="https://cucumber.io/docs/guides/overview/">Cucumber</a>, <a href="https://behave.readthedocs.io/en/stable/">Behave</a>) traverses the steps and automatizes the execution of the test code.</li>
</ul>

<p><img src="../public/images/bdd_for_better_products/execution.png" alt="" /></p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Given</span><span class="p">(</span><span class="s">"a stress shock"</span><span class="p">)</span> <span class="c1">// glue code</span>
<span class="k">fun</span> <span class="nf">oneShock</span><span class="p">(</span><span class="n">shock</span><span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">TestShock</span><span class="p">&gt;)</span> <span class="p">{</span> <span class="c1">// glue code</span>
 <span class="c1">// test code: fixture</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"one-stress-shock"</span><span class="p">,</span> <span class="n">shock</span><span class="p">.</span><span class="nf">first</span><span class="p">())</span>
<span class="p">}</span>

<span class="nd">@Given</span><span class="p">(</span><span class="s">"another stress shock"</span><span class="p">)</span> <span class="c1">// glue code</span>
<span class="k">fun</span> <span class="nf">anotherShock</span><span class="p">(</span><span class="n">shock</span><span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">TestShock</span><span class="p">&gt;)</span> <span class="p">{</span> <span class="c1">// glue code</span>
 <span class="c1">// test code: fixture</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"other-stress-shock"</span><span class="p">,</span> <span class="n">shock</span><span class="p">.</span><span class="nf">first</span><span class="p">())</span>
<span class="p">}</span>

<span class="nd">@When</span><span class="p">(</span><span class="s">"calculating amplitude"</span><span class="p">)</span> <span class="c1">// glue code</span>
<span class="k">fun</span> <span class="nf">calculateAmplitude</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// glue code</span>
 <span class="c1">// test code: action</span>
    <span class="kd">val</span> <span class="py">one</span><span class="p">:</span> <span class="nc">TestShock</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">byId</span><span class="p">(</span><span class="s">"one-stress-shock"</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">other</span><span class="p">:</span> <span class="nc">TestShock</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">byId</span><span class="p">(</span><span class="s">"other-stress-shock"</span><span class="p">)</span>
    <span class="nf">runCatching</span> <span class="p">{</span> 
    	<span class="nc">AmplitudeComputer</span><span class="p">().</span><span class="nf">compute</span><span class="p">(</span><span class="n">one</span><span class="p">.</span><span class="nf">toShock</span><span class="p">(),</span> <span class="n">other</span><span class="p">.</span><span class="nf">toShock</span><span class="p">())</span> <span class="c1">// production code</span>
	 <span class="p">}.</span><span class="nf">getOrNull</span><span class="p">()</span>
    <span class="o">?.</span><span class="nf">let</span> <span class="p">{</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="s">"result-amplitude"</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>

<span class="nd">@Then</span><span class="p">(</span><span class="s">"the returned amplitude is {word}"</span><span class="p">)</span> <span class="c1">// glue code</span>
<span class="k">fun</span> <span class="nf">returnedAmplitudeValueIs</span><span class="p">(</span><span class="n">expected</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// glue code</span>
<span class="c1">// test code: assertion</span>
    <span class="kd">val</span> <span class="py">resultAmplitude</span><span class="p">:</span> <span class="nc">Double</span><span class="p">?</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">byIdOpt</span><span class="p">(</span><span class="s">"result-amplitude"</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">expectedAmplitude</span> <span class="p">=</span> <span class="n">expected</span><span class="p">.</span><span class="nf">toNullable</span><span class="p">()</span><span class="o">?.</span><span class="nf">toDouble</span><span class="p">()</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">resultAmplitude</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="nf">assertThat</span><span class="p">(</span><span class="n">resultAmplitude</span><span class="p">).</span><span class="nf">isCloseTo</span><span class="p">(</span><span class="n">expectedAmplitude</span><span class="p">,</span> <span class="nf">offset</span><span class="p">(</span><span class="mf">0.001</span><span class="p">))</span>
    <span class="k">else</span>
        <span class="nf">assertThat</span><span class="p">(</span><span class="n">expectedAmplitude</span><span class="p">).</span><span class="nf">isNull</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="bdd-with-acceptance-test-scope">BDD with acceptance test, scope</h3>

<p>Well-written BDD scenarios are done using domain language which is naturally high-level so that one scenario could be automated for targetting either a user interacting with a <strong>frontend application</strong>, or a <strong>web API</strong>, or a component that supports <strong>application logic</strong> or <strong>domain logic</strong>. A specific glue code developed for each target enables this decoupling.</p>

<p><img src="../public/images/bdd_for_better_products/bdd_at_every_layer.png" alt="" /></p>

<p>Examples:</p>

<ul>
  <li><a href="https://github.com/vondacho/arch-blueprint-kotlin/tree/master/src/test/kotlin/edu/software/craftsmanship/blueprint/at/client">Blueprint API - AT at API level</a></li>
  <li><a href="https://github.com/vondacho/arch-blueprint-kotlin/tree/master/src/test/kotlin/edu/software/craftsmanship/blueprint/at/problemSolving">Blueprint API - AT at domain level</a></li>
</ul>

<h3 id="bdd-with-acceptance-test-vs-xunit-tests">BDD with acceptance test vs xUnit tests</h3>

<p><strong>Acceptance tests</strong> are high-level integration tests defined at feature-level. Supported by the natural language and the <a href="https://specflow.org/gherkin-editor">Gherkin</a> syntax, their self-documentation is accessible to every stakeholder and emphasizes the implemented and tested behaviour with its preconditions and postconditions. Acceptance tests usually cover functional requirements, and could check non-functional ones as well. <strong>Smoke tests</strong> can be supported by a subset of acceptance tests.</p>

<p><strong>xUnit tests</strong>, due to their technical aspect, do not connect every stakeholder, hence do not provide evidence of which functional requirements are implemented and tested.</p>

<h3 id="bdd-and-agility">BDD and agility</h3>

<p><strong>Agile</strong> ideology influences methodologies for iterative development of small increments, enabling quick feedback and adapt.</p>

<p>Delivering the most valuable scenarios inside one or more stories has a natural priority, then further valuable set of scenarios can be delivered in other increments.</p>

<p>Scenarios are developed against single acceptance tests which can be executed by a continuous integration tool. This tooling can be configured to monitor which scenarios have been delivered and which ones are still under development. This promotes transparency and enables feedback, early reaction, and prediction towards the deadline.</p>

<p><img src="../public/images/bdd_for_better_products/sesame_bdd_jenkins.png" alt="" /></p>

<blockquote>
  <p><a href="https://plugins.jenkins.io/cucumber-reports/">plugins.jenkins.io/cucumber-reports/</a></p>
</blockquote>

<h3 id="living-documentation">Living documentation</h3>

<p>Living documentation is made possible based on BDD-driven specification with tooling provided by <a href="https://serenity-bdd.github.io/theserenitybook/latest/living-documentation.html">Serenity-BDD</a>.</p>

<h3 id="evidence-of-system-well-being">Evidence of system well-being</h3>

<ul>
  <li>
    <p>With <a href="https://serenity-bdd.github.io/theserenitybook/latest/index.html">Serenity-BDD</a> test execution reports tooling, proof of evidence can be provided to auditors that all requirements covered by the system in place are supported by documented and continuous acceptance tests. It supports Java technology only.</p>
  </li>
  <li>
    <p>With <a href="http://allure.qatools.ru/">Allure</a> test execution reports tooling, more evidence can be provided to auditors that testing is done in-depth, even at the lower levels of the test pyramid i.e component integration testing and component unit testing, and uniformly for a couple of technologies (Python/Go/Java/Kotlin).</p>
  </li>
</ul>

<h3 id="summary">Summary</h3>

<h4 id="outcomes">Outcomes</h4>

<ul>
  <li><strong>Common understanding</strong> of expected system behaviour expressed in a domain-oriented ubiquitous language.</li>
  <li>Enhanced probability that the <strong>implemented thing is the right one</strong>.</li>
  <li>Human-readable, <strong>contractual and executable specification</strong> directly useable by every actor of the development team.</li>
  <li>Scenario-based, use-case-driven and domain-driven <strong>documentation of system behaviour</strong>.</li>
  <li>Scenario-based organization and <strong>survey of feature development</strong>.</li>
  <li>Innovation brought to the <strong>tester role</strong>, the test engineer can now have a significant impact on the development.</li>
</ul>

<h4 id="costs">Costs</h4>

<ul>
  <li>Time: to attend, organize and facilitate Example mapping meetings</li>
  <li>Time: to learn one new technique</li>
  <li>Time: to learn how to write BDD-scenarios</li>
  <li>Time: to setup a BDD-framework</li>
  <li>Time: to craft reusable glue code and test code</li>
  <li>Time + Money: to maintain Gherkin phrasing, glue code and test code</li>
</ul>

<p><em>This technique should reveal itself as a sustainable investment in product quality.</em></p>

<h2 id="bdd-material">BDD material</h2>

<h3 id="technical-setup">Technical setup</h3>

<p>Ready to use <strong>blueprints</strong> are available as BDD starters for some technology stack:</p>

<ul>
  <li><a href="https://github.com/vondacho/arch-blueprint-kotlin">Kotlin BDD blueprint</a> (Cucumber)</li>
</ul>

<h2 id="references">References</h2>

<h3 id="literature">Literature</h3>

<ul>
  <li><a href="https://cucumber.io/blog/bdd/example-mapping-introduction/">Example Mapping</a></li>
  <li><a href="https://www.manning.com/books/bdd-in-action">BDD in Action</a></li>
  <li><a href="https://serenity-bdd.github.io/theserenitybook/latest/index.html">Serenity-BDD book</a></li>
</ul>

<h3 id="links">Links</h3>

<ul>
  <li><a href="https://cucumber.io/docs/guides/overview/">Cucumber BDD framework</a></li>
  <li><a href="https://behave.readthedocs.io/en/stable/">Behave BDD framework</a></li>
  <li><a href="http://allure.qatools.ru/">Allure test reporting</a></li>
</ul>

</div>


<div class="related">
  <h2>Related posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2021/12/01/about-me/">
            About me
            <small>01 Dec 2021</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/02/22/technical-excellence/">
            Technical Excellence or the mastery of practices
            <small>22 Feb 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/02/22/software-craftsman/">
            Software Craftsmanship is above all a mindset
            <small>22 Feb 2020</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
